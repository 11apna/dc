<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bet History</title>

<style>
body{
    margin:0;
    font-family:"Segoe UI",Arial,sans-serif;
    background:#080b12;
    color:white;
    padding:20px 14px 40px;
}

/* TITLE */
h2{
    text-align:center;
    margin:10px 0 20px;
    font-size:20px;
    opacity:.9;
}

/* HISTORY LIST */
.history-list{
    display:flex;
    flex-direction:column;
    gap:14px;
}

.item{
    background:#0e141e;
    padding:14px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,0.07);
}
.item-title{
    font-size:15px;
    font-weight:700;
    margin-bottom:6px;
}
.item-team{
    opacity:.85;
    margin-bottom:6px;
}
.item-time{
    font-size:13px;
    opacity:.6;
}

/* SEE RESULT BTN */
.result-btn{
    margin-top:10px;
    width:100%;
    border:0;
    padding:10px;
    font-weight:700;
    border-radius:8px;
    background:linear-gradient(90deg,#0058ff,#00eaff);
    color:white;
    cursor:pointer;
}
.result-btn:active{transform:scale(.94);}

/* EMPTY */
.empty{
    text-align:center;
    opacity:.7;
    margin-top:40px;
    font-size:15px;
}

/* CLEAR BUTTON */
.clear-btn{
    margin-top:22px;
    width:100%;
    padding:12px;
    border:0;
    border-radius:10px;
    background:rgba(255,50,50,0.25);
    border:1px solid rgba(255,50,50,0.4);
    color:#ff7777;
    font-weight:700;
    cursor:pointer;
}
.clear-btn:active{transform:scale(.95);}

/* POPUP */
.popup-overlay{
    position:fixed;top:0;left:0;width:100%;height:100%;
    background:rgba(0,0,0,0.55);
    display:none;
    justify-content:center;
    align-items:center;
    backdrop-filter: blur(5px);
    z-index:9999999;
}
.popup-box{
    width:80%;max-width:360px;
    background:#121520;
    border-radius:12px;
    padding:20px;
    text-align:center;
    border:1px solid rgba(255,255,255,0.1);
    animation:pop .3s ease;
}
.popup-box h3{
    margin:0 0 10px;
    color:#ff5252;
}
.popup-btns{
    margin-top:15px;
    display:flex;
    gap:10px;
}
.pbtn{
    flex:1;
    padding:10px;
    border-radius:8px;
    border:0;
    font-weight:700;
    cursor:pointer;
}
.no-btn{
    background:#2b2b2b;color:#ccc;
}
.yes-btn{
    background:#ff4747;color:white;
}

@keyframes pop{
    from{transform:scale(.7);opacity:0;}
    to{transform:scale(1);opacity:1;}
}
</style>
</head>
<body>

<h2>Your Bet History</h2>

<div id="historyBox" class="history-list"></div>

<button class="clear-btn" onclick="openClearPopup()">Clear Bet History</button>


<!-- POPUP -->
<div class="popup-overlay" id="clearPop">
  <div class="popup-box">
    <h3>Clear All History?</h3>
    <p>This action cannot be undone.</p>
    <div class="popup-btns">
        <button class="pbtn no-btn" onclick="closeClearPopup()">Cancel</button>
        <button class="pbtn yes-btn" onclick="clearHistory()">Delete</button>
    </div>
  </div>
</div>

<script>
// SHOW HISTORY
function loadHistory(){
    let list = JSON.parse(localStorage.getItem("BET_HISTORY") || "[]");
    const box = document.getElementById("historyBox");

    if(list.length === 0){
        box.innerHTML = `<p class="empty">No bet records found.</p>`;
        return;
    }

    list.reverse(); // latest first

    list.forEach(b=>{
        let cleanTeam = b.team.replace("(Black)","").replace("(Blue)","").trim();
        let linkParam = cleanTeam.toLowerCase();

        let div = document.createElement("div");
        div.className = "item";

        div.innerHTML = `
            <div class="item-title">Bet: â‚¹${b.amount}</div>
            <div class="item-team">${b.team}</div>
            <div class="item-time">${b.time}</div>

            <button class="result-btn" onclick="location.href='/result-${linkParam}'">
                See Result
            </button>
        `;
        box.appendChild(div);
    });
}
loadHistory();


// POPUP OPEN/CLOSE
function openClearPopup(){
   document.getElementById("clearPop").style.display = "flex";
}
function closeClearPopup(){
   document.getElementById("clearPop").style.display = "none";
}

// CLEAR HISTORY
function clearHistory(){
    localStorage.removeItem("BET_HISTORY");
    location.reload();
}
</script>

</body>
</html>
